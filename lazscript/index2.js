!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ali/wpk-reporter")):"function"==typeof define&&define.amd?define(["exports","@ali/wpk-reporter"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).iLogger={},e.wpkReporter)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,i,r=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return r}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}var p=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?null:{},o=document.cookie?document.cookie.split("; "):[],i=/(%[0-9A-Z]{2})+/g,r=0;r<o.length;r++){var a=o[r].split("="),c=a.slice(1).join("=");t.json||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=a[0].replace(i,decodeURIComponent);if(c=c.replace(i,decodeURIComponent),t.json)try{c=JSON.parse(c)}catch(e){}if(e===l){n=c;break}e||(n[l]=c)}catch(e){}}return n},f={ID:{id:"360",lang:["id","en"],langShort:["id","en"],currency:"IDR",domain:"lazada.co.id",regionID:"ID"},MY:{id:"458",currency:"MYR",lang:["en-MY","ms","zh"],langShort:["en","ms","zh"],domain:"lazada.com.my",regionID:"MY"},PH:{id:"608",currency:"PHP",lang:["en-PH"],langShort:["en"],domain:"lazada.com.ph",regionID:"PH"},SG:{id:"702",currency:"SGD",lang:["en-SG","zh"],langShort:["en","zh"],domain:"lazada.sg",regionID:"SG"},TH:{id:"764",currency:"THB",lang:["th","en"],domain:"lazada.co.th",regionID:"TH"},VN:{id:"704",currency:"VND",lang:["vi","en"],domain:"lazada.vn",regionID:"VN"}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;if(e.includes("?")){var o=e.split("?"),i=l(o,2),r=i[1];n=void 0===r?"":r}if(n.includes("#")){var a=n.split("#"),c=l(a,1),d=c[0];n=void 0===d?"":d}for(var s=n.split("&"),u={};s.length;){var p=s.shift(),f=p.split("="),w=l(f,2),g=w[0],m=void 0===g?"":g,h=w[1],v=void 0===h?"":h;m&&(u[m]=t?decodeURIComponent(v):v)}return u},g=navigator.userAgent||"",m=w();function h(e){return e?e.split("|"):[]}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e=e.toLocaleUpperCase();var n=f[e]?f[e].lang:[];if(!Array.isArray(n))return t;for(var o="",i=0;i<n.length;i++){var r=n[i];if(r&&r.indexOf(t)>-1){o=r;break}}return o||(o=n[0]),o}function y(){var e={},t={};if("undefined"==typeof window||"undefined"==typeof performance||"undefined"==typeof MutationObserver)void 0!==e&&(e.exports={on:function(){},un:function(){}});else{var n=function(){S.observe(document.body,E),x=[],f(document.querySelectorAll("[ignoreFspCollection]"),(function(e){x.push(e)})),l(document.querySelectorAll("BODY > *")),setTimeout((function(){o(!0)}),m)},o=function(e){_||(O=!0,b&&clearTimeout(b),S.disconnect(),S.takeRecords(),x=[],setTimeout((function(){_=!0,u(e)}),1e3))},i=function(e){return e.width&&e.height&&e.top<screen.height&&e.left<screen.width&&e.top+e.height>0&&e.left+e.width>0},r=function(e,t,n){var o=n||0;return f(e,(function(e){o=t(e,o)})),o},a=function(e){var t=function(){e.lastTime=Math.max(p(),e.lastTime),s()};window.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,0)},c=function e(t,n,o){var c=t.piece,l=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,u=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft||0,w=o?null:n.getBoundingClientRect(),m=o||{type:0,className:d(n),top:w.top+l,left:w.left+u,width:w.width,height:w.height},h=n.offsetParent;h&&h.offsetWidth<h.scrollWidth&&(m.width=Math.min(h.offsetWidth,m.width)),h&&h.offsetHeight<h.scrollHeight&&(m.height=Math.min(h.offsetHeight,m.height));var v=!0,y=n.tagName;if(-1!==T.indexOf(y.toUpperCase())&&(v=!1,"IMG"===y)){var b=0;if(m.width=Math.max(m.width,1),m.height=Math.max(m.height,1),m.type=1,i(m)){t.wait+=1,n.addEventListener("load",(function e(){if(_)n.removeEventListener("load",e,!0);else{b++,t.wait-=1;var o=n.getBoundingClientRect(),c=p();i(m)&&(b<=1||c<=1e3)?(m.width=o.width,m.height=o.height,t.lastTime=Math.max(c,t.lastTime),m.size=o.width*o.height,m.v=m.size/g,t.v=r(t.piece,(function(e,t){return e.v+t}),0),a(t)):s()}}),!0),n.addEventListener("error",(function e(){_?n.removeEventListener("error",e,!0):(t.wait-=1,i(m)?(t.lastTime=Math.max(p(),t.lastTime),0===t.wait&&(t.v=r(t.piece,(function(e,t){return e.v+t}),0),a(t))):s())}),!0)}}var O={};if(window.getComputedStyle&&("none"===(O=window.getComputedStyle(n,null)).display||"fixed"===O.position))return v=!1,c;if(i(m)){var x=O.backgroundImage||"",S=/url\(['"]?(.*?)['"]?\)/i;if(S.test(x)&&(x=x.replace(S,"$1"),!/^data:/i.test(x))){t.wait+=1;var E=document.createElement("img");E.onload=function(){t.wait-=1,t.lastTime=Math.max(p(),t.lastTime),0===t.wait&&a(t)},E.src=x}if(function(e,t){var n=null;for(var o in e)if(n=e[o],t.top>=n.top&&t.left>=n.left&&t.top+t.height<=n.top+n.height&&t.left+t.width<=n.left+n.width)return!0;return!1}(c,m)||(m.size=m.width*m.height,m.v=m.size/g,t.v+=m.v,m.size?c.push(m):v=!1),v){var I=n.children;f(I,(function(n){e(t,n)}))}}return c},l=function(e){var t=p(),n={createTime:t,lastTime:t,wait:0,piece:[],v:0,c:document.getElementsByTagName("*").length};f(e,(function(e){(function(e){for(var t=x.length,n=null,o=0;o<t;o++)if((n=x[o])&&n.contains&&n.contains(e))return!0;return!!e.hasAttribute("ignoreFspCollection")&&(x.push(e),!0)})(e)||c(n,e)})),n.piece.length>0&&(w.push(n),a(n))},d=function(){if(!y)return""},s=function(){if(!O&&!_){b&&clearTimeout(b),b=setTimeout((function(){y&&console.log("stop By Idle"),o()}),h);for(var e=null,t=null,n=0,i=0,r=0,a=0,c=0,l=w.length-1;l>1;l--){if(e=w[l],t=w[l-1],a=Math.floor(100*e.v)/100,i=(c=Math.floor(100*t.v)/100)?Math.abs(a-c)/c:0,(r+=e.v)>2){y&&console.log("stop By sum area 2",r),o();break}if(i<.5){if(++n>6){y&&console.log("stop By stable tail"),o();break}}else n>0&&(n=0)}}},u=function(){var e=w.length;if(0!==e){var n=[],i=[],r=[],a=-1,c=0,l=0,d=null,s=null,u=0,p=0;for(e=w.length-1;e>1;e--)if(d=w[e],s=w[e-1],u=Math.floor(100*d.v)/100,p=Math.floor(100*s.v)/100,(c=p?Math.abs(u-p)/p:0)>.1){if(++l>2)break}else l=0;for(i=l>2?w.slice(0,e+2):w;i.length>0;)if(a=i[0].lastTime,r=[],c=0,l=0,f(i,(function(e){c+=e.v,l++,e.createTime<=a+v&&(a=Math.max(a,e.lastTime)),e.lastTime>a&&r.push(e)})),i=r,c<.02||c/l<.01?(y&&console.log("ignore min render"),I++):I=0,n.push(a),I>=3){y&&console.log("stop By keep min render 3"),n.splice(n.length-3),o();break}var g=n.length-1;0!==I&&(g=Math.max(g-I,0));var m=g===n.length?-3:g-1;m<=0&&(m=0),t._fn(n[g],n.slice(m,m+3))}},p=function(){return performance.now()},f=function(e,t){if(Array.prototype.forEach)Array.prototype.forEach.call(e,t);else for(var n=e.length,o=0;o<n;o++)t(e[o],o)},w=window._t2Frames=[],g=screen.width*screen.height,m=3e4,h=3e3,v=200,y=0,b=null,_=!1,O=!1,T=["SCRIPT","LINK","SVG","IMG","VIDEO"],x=[],S=new MutationObserver((function(e){var t=[],n=[];f(e,(function(e){f(e.addedNodes,(function(e){1!==e.nodeType&&9!==e.nodeType||t.push(e)}))})),t.length+n.length>0&&l(t.concat(n))})),E={childList:!0,subtree:!0};document.body?n():document.addEventListener&&document.addEventListener("DOMContentLoaded",n);var I=0;t.on=function(e){t._fn=e},t.un=function(){t._fn=function(){}},t.un(),void 0!==e&&(e.exports=t)}return e.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},,,function(e,t,n){var o=n(0).env,i=function(e){var t;return(e&&(t=e.replace(/^#\/?/,""))&&"string"==typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"")||"[index]"},r=function(e,t){if(t=t||{},e.env===o.BROWSER&&window)if(e.toolKit.extend({enable:!0},t).enable){e.logger.info("wpkflowPlugin已开启");var r,a,c=function(){e.reportFlow()};"complete"===document.readyState?setTimeout(c,0):e.toolKit.onListen(window,"load",c,!0),e.spa&&(n(4)(),r=function(t){i(location.hash)&&(e._begin=Date.now(),e._sid=e.toolKit.uuid(),e.reportFlow())},a=function(t){i(t.detail)&&(e._begin=Date.now(),e._sid=e.toolKit.uuid(),e.reportFlow())},e.toolKit.onListen(window,"hashchange",r),e.toolKit.onListen(window,"historystatechange",a)),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),e.toolKit.offListen(window,"hashchange"),e.toolKit.offListen(window,"historystatechange"),c=r=a=null}))}else e.logger.info("wpkflowPlugin已关闭")};r.prototype.pluginId="flow",e.exports=r},function(e,t){var n=window.history||{},o=window.document,i=function(e,t){var n;window.CustomEvent?n=new CustomEvent(e,{detail:t}):((n=o.createEvent("HTMLEvents")).initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)},r=function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},a=function(e){var t=n[e];"function"==typeof t&&(n[e]=function(e,o,a){var c=location.href,l=t.call(n,e,o,a);if(!a||"string"!=typeof a)return l;if(a===c)return l;try{var d=c.split("#"),s=a.split("#"),u=r(d[0]),p=r(s[0]),f=d[1]&&d[1].replace(/^\/?(.*)/,"$1"),w=s[1]&&s[1].replace(/^\/?(.*)/,"$1");u!==p?i("historystatechange",p):f!==w&&i("historystatechange",w)}catch(e){}return l},n[e].toString=e+"() { [native code] }")};e.exports=function(){a("pushState"),a("replateState")}}])}(_);var O=b(_.exports),T={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({0:function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},6:function(e,t,n){var o=n(0),i=o.sdk,r=o.http.methods,a=o.category,c=function(e){return e>=200&&e<=299},l=function(e){return-1===e.indexOf("//arms-retcode")&&-1===e.indexOf("//retcode.taobao.com")&&-1===e.indexOf("aliyuncs.com/r.png")&&-1===e.indexOf("//mdap.alipay.com/loggw")&&-1===e.indexOf("//wpk-gateway")&&-1===e.indexOf("//px.ucweb.com")&&-1===e.indexOf("//px.effirst.com")&&-1===e.indexOf("//px-intl.ucweb.com")&&-1===e.indexOf("//gm.mmstat.com/arms.1.1")&&-1===e.indexOf("//gm.mmstat.com/arms.1.2")&&-1===e.indexOf("//g.alicdn.com/alilog")},d=function(e,t){if(e.hasOwnProperty(t))return e[t]},s=function(e,t,n){e.toolKit.isObject(n)&&e.toolKit.extend(t,{c1:d(n,"c1"),c2:d(n,"c2"),c3:d(n,"c3"),c4:d(n,"c4"),c5:d(n,"c5"),bl1:d(n,"bl1"),bl2:d(n,"bl2"),bl3:d(n,"bl3"),bl4:d(n,"bl4"),bl5:d(n,"bl5")}),e.report(t)};function p(e){try{if(!e)return{};var t,n={},o=u(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;n[i[0]]=i[1]}}catch(e){o.e(e)}finally{o.f()}return n}catch(e){return{}}}var f=function(e,t){if(e.env===o.env.BROWSER&&window){var n=e.toolKit.extend({enable:!0,sampleRate:1},t);n.enable?(e.logger.info("wpkinterfacePlugin已开启"),"fetch"in window&&function(e,t){var n=window.fetch;window.fetch=function(){var o=[].slice.call(arguments),d=r.GET;o[1]&&o[1].method&&(d=o[1].method.toUpperCase());var u=Date.now();return n.apply(this,o).then((function(n){try{var f=Date.now(),w=(n.url||o[0]).split("?"),g=w[0],m=w[1]||"",h="",v=null;o[1]&&(v=o[1].headers),d!==r.GET&&o[1]&&o[1].body&&(h=JSON.stringify(o[1].body));var y=n.clone(),b=p(y.headers);y.text().then((function(o){o=o||"";var i=!0,r={};if("function"==typeof t.errorFilter&&(i=!!(r=t.errorFilter.call(this,{url:g,status:n.status,response:o,body:h,queryString:m,reqHeaders:v,resHeaders:b})),e.logger.warn("api errorFilter执行结果：",r)),o=o.length>2048?"[response content too large]":o,i&&f-u<121e3&&l(g)){var p=r.bizCode||n.status,w={category:a.API,sampleRate:t.sampleRate,w_res:g,w_param:m,w_body:c(p)||!t.withBody?"":h,w_method:d,w_rc:p,w_rt:f-u,w_resp:c(p)||!t.withResp?"":r.resp||o,msg:r.msg||"",w_type:16};s(e,w,r)}}))}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}return n})).catch((function(e){throw e}))}}(e,n),(e.enableMtop||n.enableMtop)&&(e.logger.info("use mtop"),function(e,t){window&&window.lib.mtop&&window.lib.mtop.middlewares&&window.lib.mtop.middlewares.push((function(n){var o=this.params,r=this.options,d=Date.now();return n().then((function(){try{if(r.H5Request&&(r.getJSON||r.postJSON))return void e.logger.debug("识别到请求为xhr, api监控交由xhr的方式处理");var n,u=r.retJson||{},p=Date.now()-d,f=u.code||200,w=o.type,g=r.path||r.api,m=e.toolKit.objToQueryString(r.querystring),h=r.postdata&&r.postdata.data?e.toolKit.objToJsonString(r.postdata.data):null,v=e.toolKit.objToJsonString(u.data||{}),y=u.ret;y instanceof Array&&(y=y.join(",")),-1===y.indexOf("SUCCESS")&&(n=y);var b=!0,_={};if("function"==typeof t.errorFilter&&(b=!!(_=t.errorFilter.call(this,{url:g,status:f,response:v,body:h,queryString:m,msg:n})),e.logger.warn("api errorFilter执行结果：",_)),b&&p<121e3&&l(g)){var O=_.bizCode||f,T={category:a.API,sampleRate:t.sampleRate,w_res:g,w_param:m,w_body:c(O)||!t.withBody?"":h,w_method:w,w_rc:O,w_rt:p,w_resp:c(O)||!t.withResp?"":_.resp||v,msg:_.msg||n||"",w_type:16};s(e,T,_)}}catch(t){e.reportError(t,{bid:i.BID,cid:i.CID,category:a.JSERR,sampleRate:1})}}))}))}(e,n))):e.logger.info("wpkinterfacePlugin已关闭")}};f.prototype.pluginId="api",e.exports=f}})}(T);var x=b(T.exports);function S(e){return window.__PAGE_NAME?"".concat(window.__PAGE_NAME,"-").concat(e):e}var E=0,I=0,P=0;function k(e,t,n,o){var i=function(e,t){return t||(window.rocket_pre_hot?(E=window.rocket_show_up_start_time,e?e-E:+new Date-E):(E=E||performance.timeOrigin,e?e-E:+new Date-E-P))}(e,t),r=+new Date;!function(e,t){if(!(window.WindVane||{}).isAvailable)return!1;window.WindVane&&window.WindVane.call("LACustomWVPlugin","reportPerformanceInfo",{url:location.href,containerType:"object"===a(window.__pha_environment__)?1:0,firstScreenPaint:e,firstScreenPaintTimeStamp:t},(function(){console.log("[component_did_mount_hook] report time to App",e)}),(function(e){console.log("err",e)}))}(i,r),function(e,t,n,o){window.__wpk&&window.__wpk.report&&(window.__wpk.report(Object.assign({category:203,msg:S("componentDidMount"),wl_avgv1:e,c1:e,c2:E,c3:t||"-",c4:P,c5:I},o)),console.log("[component_did_mount_hook] report time to iTrace",e))}(i,r,0,o)}window.__WindVane=window.WindVane||{};var j=function(){console.log("[lzd iTrace share componentDidMount Time plugin]: init  debug"),window.lzdiTraceLifeCircle=window.lzdiTraceLifeCircle||{},window.lzdiTraceLifeCircle.lzdiTraceShareDidMountTime=function(e,t,n,o){if(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";0!==e.indexOf("/")&&(e="/".concat(e));var i=Object.keys(n).map((function(e){return"".concat(e,"=").concat("string"==typeof n[e]?n[e]:JSON.stringify(n[e]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(e,t,i,"POST"===o?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[e,t,i,"POST"===o?"POST":"GET"]})}("/lzdfe.pageModule.exp","EXP"),window.rocket_pre_hot)return null;(I=performance.now()||0,(window.WindVane||{}).isAvailable)?function(e,t){if(E)return E;if(!(window.WindVane||{}).isAvailable)return null;var n=+new Date;window.WindVane&&window.WindVane.call("LACustomWVPlugin","webViewCreatedTimestamp",{},(function(t){var o=+new Date;P=o-n,console.log("webViewCreatedTimestamp res",P,t),E=Number(t.createdTimestamp||0),e&&e()}),(function(e){t&&t(),console.log("get start time from app failed:",JSON.stringify(e))}),(function(){var e=+new Date;P=e-n}))}(k.bind(this,e,t,n,o)):k(e,t,0,o)}},L=[/c\.go\-mpulse\.net/,/ds\-aksb\-a\.akamaihd\.net\/RRT/,/s\.akamaihd\.net\/eum\/getdns\.txt/,/pre\-wormhole/],D=["SUCCESS","UNION_NOT_MATCH_FREQUENCY","FAIL_SYS_TOKEN_EMPTY","FAIL_SYS_ILLEGAL_ACCESS","FAIL_SYS_TOKEN_EXOIRED","FAIL_SYS_TOKEN_ILLEGAL"],A={SG:"acs-m.lazada.sg",ID:"acs-m.lazada.co.id",PH:"acs-m.lazada.com.ph",VN:"acs-m.pages.lazada.vn",TH:"acs-m.pages.lazada.co.th",MY:"acs-m.pages.lazada.com.my"};var M=/AliApp/.test(g),R=p("lzd_uid"),N=(navigator.userAgent||"").toLowerCase().indexOf("android")>-1,z="1.0.57",C=!!document.querySelector("meta[name='wpk-bid']"),F=w(),H={},G=!1,W=!1,K=!1,U="";if(C){var q=document.head.querySelector('meta[name="wpk-bid"]');q&&q.getAttribute("content")&&(U=q.getAttribute("content"))}!C&&N&&console.warn("It is strongly recommended that integrate iTrace UC core monitor to your page, https://yuque.antfin-inc.com/wpk/help/vfx057");var B,J=!(!(B="object"===("undefined"==typeof location?"undefined":a(location))&&location.hostname||"")||!(B.indexOf("i.lazada.")>=0||B.indexOf("-p.lazada.")>=0||B.indexOf("pre-wormhole.")>=0||B.indexOf("pre.lazada.")>=0||B.indexOf("pre-www.lazada.")>=0||B.indexOf("-staging.lazada.")>=0)||!F.iTraceDebug),V={en:"Network error, please try again later",id:"Kesalahan jaringan, coba lagi nanti",ms:"Ralat rangkaian, sila cuba lagi kemudian",my:"ကွန်ယက်ကိုအမှား, နောက်မှာထပ်ကြိုးစားကြည့်ပါ",th:"ข้อผิดพลาดของเครือข่ายโปรดลองอีกครั้งในภายหลัง",vi:"Lỗi mạng, vui lòng thử lại sau",bn:"নেটওয়ার্ক ত্রুটি, দয়া করে পরে আবার চেষ্টা করুন",si:"ජාල දෝෂය, නැවත උත්සාහ කරන්න",ne:"सञ्जाल त्रुटि, कृपया पछि फेरि प्रयास गर्नुहोस्",ur:"نیٹ ورک کی غلطی، براہ کرم بعد میں دوبارہ کوشش کریں"};function Y(){var e=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="",n="",o=h(p("hng"));if("object"===("undefined"==typeof window?"undefined":a(window))&&window._i18n_){var i=window._i18n_;if("string"==typeof i)try{i=JSON.parse(i)}catch(e){}"object"===a(i)&&(t=i.regionID,n=i.language)}if(!t&&window.g_config&&"object"===a(window.g_config)&&(t=window.g_config.regionID,n=window.g_config.language),!t&&"object"===("undefined"==typeof location?"undefined":a(location))&&location.hostname){for(var r in f){var c=f[r];if(c&&c.domain&&location.hostname.indexOf(c.domain)>-1){t=c.regionID;break}}o.length>1&&(n=o[1])}return t||o.length>=4&&(t=o[0],n=o[1]),n=v(t=m.wh_regionID||t||"SG",n)||"en",e&&(n=n.substring(0,2)),{regionID:t.toLocaleUpperCase(),language:n}}(),t=e.language;return V[(void 0===t?"EN":t).toLowerCase()]||V.en}function X(e){var t=(window.lzdiTraceLifeCircle||{}).lzdiTraceBeforeSend;try{return e&&t&&"function"==typeof t&&(e=t(e)),e}catch(t){return console.error("iTrace sdk beforeSend Format function execute error",t),e}}var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.pid){var t=null;return window.__wpk?(e.pid&&(e.bid=e.pid,delete e.pid),window.__wpk.setConfig(e),t=window.__wpk):(C&&M&&N?(t=new o.default({bid:e.pid,cid:e.cid||"",uid:e.uid||R,rel:e.rel||z,cluster:"intl",plugins:[[O,{enable:!1}]],debug:e.isDebug||J,beforeSend:X})).install():(t=new o.default({bid:e.pid,cid:e.cid||"",uid:e.uid||R,rel:e.rel||z,cluster:"intl",plugins:[[x,{enable:!1}]],debug:e.isDebug||J,beforeSend:X})).installAll(),window.__wpk=t),console.log("lzd-h5-itrace version: v".concat(z)),t}console.warn("[lzd-h5-itrace] 实例化失败，缺少必要参数")},Q=function(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=window.__wpk;window.__wpk?L.some((function(t){return t.test(e)}))||c.reportApiError(r({msg:i,url:e,method:t,status:o,spent:n,response:o},a),{}):console.warn("[lzd-h5-itrace] 请先调用 iLoggerIntegrate 方法进行初始化，再调用这个方法")},Z=function(e){if(!K){var t=function(e){var t=e.name,n=e.duration,o=void 0===n?0:n,i=e.decodedBodySize,r=void 0===i?0:i,a=e.encodedBodySize,c=void 0===a?0:a,l=e.transferSize,d=void 0===l?0:l;try{var s=new URL(t);window.__wpk.report({category:202,msg:s.hostname,wl_avgv1:o.toFixed(2),wl_avgv2:r,wl_avgv3:c,wl_avgv4:d,c1:t,bl1:JSON.stringify(e),bl5:JSON.stringify(e),sampleRate:.01})}catch(e){}},n=function(e){var n=function(e){var t,n=new URL(e.name);return"img"!==e.initiatorType||(t=n.hostname).includes("member.lazada.")||t.includes("my.lazada.")||t.includes("www.lazada.")||t.includes("pages.lazada.")||t.includes("c.lazada.")||t.includes("www.google.")||t.includes("translate.google.")||t.includes("criteo.net")||t.includes("doubleclick.net")||t.includes("googleadservices")||t.includes("mmstat.com")||-1!==["graph.facebook.com","connect.facebook.net","csi.gstatic.com","airunit.taobao.com","acjs.aliyun.com","whos.amung.us","kcart.alipay.com","www.google-analytics.com","px-intl.ucweb.com","www.googletagmanager.com","googleads.g.doubleclick.net","www.facebook.com","gm.mmstat.com","sg.mmstat.com","bat.bing.com","cm.everesttech.net","pixel.everesttech.net","retcode-sg-lazada.arms.aliyuncs.com","fourier.taobao.com","pixel.tapad.com","secure.adnxs.com","s-cs.send.microad.jp","cs.adingo.jp"].indexOf(t)?null:e}(e);n&&(window.requestIdleCallback?window.requestIdleCallback((function(){t(n)})):setTimeout((function(){t(n)}),0))};if(K=!0,window.__wpk||$(e),console.log("[lzd-h5-itrace] init images perf monitor"),window.performance&&window.PerformanceObserver)window.performance.getEntriesByType("resource").forEach((function(e){n(e)})),new PerformanceObserver((function(e){e.getEntries().forEach((function(e){n(e)}))})).observe({entryTypes:["resource"]})}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};W||(W=!0,window.__wpk||$(e),y&&y().on((function(t){if(window.__lzd_fsp_done=!0,window.__wpk&&window.__wpk.report){var n=Math.floor(t)-Math.floor(window.preLoadTime||0);if(n>0&&n<2e4){var o=e.msg||"自定义首屏";o=S(o),window.__wpk.report({category:e.category||200,msg:o,wl_avgv1:n,c1:n,c2:t,c3:window.preLoadTime||"-"});var i=(window.lzdiTraceLifeCircle||{}).lzdiTraceShareFspTime;"function"==typeof i&&i({fspTime:n,preLoadTime:window.preLoadTime,url:location.href})}else{var r=n<0?"负值":"极大值 (>20s)";window.__wpk.report({category:e.category||200,msg:"".concat(r),c1:n,c2:t,c3:window.preLoadTime||"-"})}}})))},te=function(e){var t;G||(window.__wpk||$(e),window,(t=window.lib||(window.lib={}))&&t.mtop&&!t.mtop.ERROR?(t.mtop.middlewares.push((function(e){var t=this.params,n=this.options,o=n.querystring,i=parseInt((void 0===o?{}:o).t)||Date.now();return e().then((function(){var e,o,r,a="",c=n.retJson,l=void 0===c?{}:c,d=n.path,s=n.prefix,p=n.subDomain,f=n.pageDomain,w=(n.results[0]||{}).stat,g=void 0===w?{}:w,m=l.responseHeaders,h=void 0===m?"":m,v=l.ret,y=function(e){var t,n=u(e.split("\r\n"));try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.indexOf("x-eagleeye-id")>-1){var i=o.split(":");return i[1]?i[1]:""}}}catch(e){n.e(e)}finally{n.f()}return""}(h),b=function(e){var t=e&&e.length&&e[0].split("::");return-1!==e[0].indexOf("FAIL_SYS")||-1!==e[0].indexOf("SYSTEM_ERROR")||-1!==e[0].indexOf("UNKNOWN_FAIL_CODE")||-1!==e[0].indexOf("TIMEOUT")?{key:t[0],displayMessage:Y()}:t&&t[1]?{key:t[0],displayMessage:t[1]}:{key:e[0],displayMessage:Y()}}(v),_=b.displayMessage,O=t.type||"",T=l.v||t.v||"",x=t["x-i18n-regionID"]||"-",S=A[x.toUpperCase()]||x,E=l.api||t.api||"";E=E.toLowerCase(),e=t.ext_headers&&t.ext_headers["x-uid"]||"",r=D.includes(b.key)?200:0,o=g.oneWayTime||Date.now()-i,a=d?"https:".concat(d):p&&f?"https://".concat(s?s+".":"").concat(p,".").concat(f,"/gw/").concat(E,"/").concat(T):"https://".concat(S,"/gw/").concat(E,"/").concat(T),Q(a,O,o,r,b.key,{c1:e,c2:y,c3:_})}))})),G=!0,console.log("[lzd-h5-itrace] mtop itrace plugin init success!")):console.warn("[lzd-h5-itrace] Mtop 没有初始化，无法添加 Mtop Itrace 监控插件！请参考 Mtop 文档 http://gitlab.alibaba-inc.com/mtb/lib-mtop ",t))};!function(){if(window){window.addEventListener("oniLoggerMtopPluginInit",(function(e){te(e.detail)}),!1);var e=!0;if(window.lib?window.lib.mtop&&(e=!1):window.lib={},e&&Object.defineProperty(window.lib,"mtop",{get:function(){return window.__lzdlib_mtop__},set:function(e){window.__lzdlib_mtop__=e,Object.defineProperty(window.lib.mtop,"middlewares",{get:function(){return window.__lzdlib_mtop_middlewares__},set:function(e){var t=new CustomEvent("oniLoggerMtopPluginInit",{detail:H||{}});window.__lzdlib_mtop_middlewares__=e,window.dispatchEvent(t)},configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0}),U){var t={selfDefineFSP:!0,mtopPluginInit:!0,imagesPerf:!0,didMountTimeReport:!0},n=document.head.querySelector('meta[name="lzd-itrace-close-auto-monitor"]');if(n&&n.getAttribute("content"))n.getAttribute("content").split(",").forEach((function(e){var n=e.trim();t[n]=!1}));$({pid:U}),t.selfDefineFSP?ee({pid:U}):console.log("[lzd-h5-itrace] close auto run selDefineFSP"),t.imagesPerf?Z({pid:U}):console.log("[lzd-h5-itrace] close auto run iLoggerImagesPerf"),window.lib&&window.lib.mtop&&t.mtopPluginInit?te({pid:U}):console.log("[lzd-h5-itrace] close auto run mtopPluginInit"),t.didMountTimeReport?j():console.log("[lzd-h5-itrace] disable didMountTimeReport")}}}(),e.iLoggerInit=$,e.iLoggerIntegrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";try{t=$(e)}catch(e){console.log("[lzd-h5-itrace] catch iTrace sdk error, make program go on!")}return ee(e),Z(e),j(),H=e,te(e),t},e.iLoggerMtopPluginInit=te,e.iLoggerReportApi=Q,e.iLoggerSelfDefineFSP=ee,Object.defineProperty(e,"__esModule",{value:!0})}));
